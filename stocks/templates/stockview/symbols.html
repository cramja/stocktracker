<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset=utf-8>
    <link href="/static/css/flat-ui.css" rel="stylesheet">
</head>
<body>
    <h3 style="text-align:center">{{ user.username }}'s portfolio</h3>

    <table>
        <thead>
            <tr>
                <th>Code</th>
                <th>Name</th>
                <th>Select</th>
            </tr>
        </thead>
        <form id="removeStocks" action="/remove_stock" method="post">{% csrf_token %}
            {% for stock in user_stocks %}
                <tr>
                    <td>{{stock.code}}</td>
                    <td>{{stock.name}}</td>
                    <td><input type="checkbox" name="stock" data-toggle="checkbox" value="{{stock.code}}"/></td>
                <tr>
            {% endfor %}
        </form>
    </table> 
    <button class="btn btn-default btn-primary"onclick="visualizeStocks()">Visualize</button>
    <button class="btn btn-default btn-danger" onclick="submitRemoveStocks()">Remove</button>
    
    <br/>
    <br/>

    <form style="inline" id="addStock" action="/add_stock" method="post">{% csrf_token %}
        <select class="form-control" name="stock">
            {% for s in other_stocks %}
                <option value="{{s.code}}">{{s.code}}</option>
            {% endfor %}
        </select>
        <button class="btn btn-default btn-primary" type="submit">Add Stock</button>
        <!--<input type="submit" value="Add">-->
    </form>
    <script src="/static/js/flatui-checkbox.js"></script>
</body>

 <script>
//  function getStocks() {
//         alert("wtf");
//         $.getJSON('/getStocks/', renderStocks);
//     }
    
//  function renderStocks(data) {
//      document.write("here");
//      htmltoinsert = '<form name="addStock" action="/add_stock" method="post">'
//      htmltoinsert += '<input type="submit" value="Submit"/>'
//      htmltoinsert += '<select name ="stock">'
//      $.each(data,function(k,v){
//          htmltoinsert += '<option value='+v.code+'name='+v.code+'>'+v.code+' 'v.name+'</option>'
//         }
//      htmltoinsert += '</select>'
//      htmltoinsert += '<input type="submit" value="Submit">'
//      htmltoinsert += '</form>'
//      $('#add').prepend(htmltoinsert);
//      };
// </script>
{% endif %}
=======
<script>
    function submitRemoveStocks() {
        document.getElementById("removeStocks").submit();
    }
    function visualizeStocks() {
        checkedStocks = $("input:checkbox[name=stock]:checked");
        stock_label = checkedStocks[0].value;
        additional_stocks = "";
        for (int i = 1; i < checkedStocks.length; i++) {
            additional_stocks += checkedStocks[i].value
            if (i != checkedStocks.length-1
                additional_stocks += ', '
        }
        $('#stock_label').text(stock_label);
        $('#additional_stocks').text(additional_stocks);
    }
</script>
</html>

